<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Little Letter of Gratitude for you all!</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Caveat:wght@400;700&family=Lora:ital,wght@0,400;0,700;1,400&display=swap');
        
        :root {
            --primary-color: #4a6fa5;
            --accent-color: #c17a74;
            --background-color: #f9f6f0;
            --text-color: #333;
            --paper-color: #fff9f0;
        }
        
        body {
            font-family: 'Lora', serif;
            background-color: var(--background-color);
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: var(--text-color);
            position: relative;
            overflow-x: hidden;
        }

        .envelope-container {
            width: 90%;
            max-width: 900px;
            perspective: 1000px;
            margin-bottom: 100px;
        }
        
        .envelope {
            width: 100%;
            height: 0;
            padding-bottom: 60%;
            background-color: #e0d5c1;
            position: relative;
            transform-style: preserve-3d;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            transition: transform 1.5s ease;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .envelope.opened {
            transform: rotateX(180deg);
            height: 0;
            padding-bottom: 0;
            margin-top: -100px;
            transition: transform 1.5s ease, height 0.5s ease 1.5s, padding-bottom 0.5s ease 1.5s, margin-top 0.5s ease 1.5s;
        }
        
        .envelope-flap {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%;
            background-color: #d4c9b5;
            clip-path: polygon(0 0, 50% 100%, 100% 0);
            transform-origin: top;
            transition: transform 0.5s ease;
            z-index: 3;
        }
        
        .envelope.opened .envelope-flap {
            transform: rotateX(180deg);
        }
        
        .envelope-body {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #e0d5c1;
            border-bottom-left-radius: 10px;
            border-bottom-right-radius: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1;
        }
        
        .wax-seal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background-color: var(--accent-color);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-family: 'Caveat', cursive;
            font-size: 32px;
            font-weight: bold;
            z-index: 4;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .wax-seal:hover {
            transform: translate(-50%, -50%) scale(1.1);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        
        .container {
            max-width: 1000px;
            width: 90%;
            padding: 40px;
            position: relative;
            transition: transform 0.5s ease, opacity 0.5s ease;
            transform: translateY(50px);
            opacity: 0;
            display: none;
        }
        
        .container.visible {
            transform: translateY(0);
            opacity: 1;
            display: flex;
            flex-direction: row;
            gap: 30px;
            align-items: flex-start;
        }

        .paper-texture {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3CfeColorMatrix type='matrix' values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0.15 0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
            opacity: 0.5;
            pointer-events: none;
            z-index: 0;
        }
        
        /* Left side gimmicks */
        .left-side {
            flex: 1;
            max-width: 300px;
            position: relative;
        }
        
        .sticky-note {
            background-color: #feff9c;
            padding: 15px;
            width: 200px;
            min-height: 120px;
            box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
            transform: rotate(-3deg);
            margin-bottom: 30px;
            position: relative;
            font-family: 'Caveat', cursive;
            font-size: 18px;
            line-height: 1.4;
            transition: transform 0.3s ease;
            opacity: 0;
            animation: fadeIn 0.5s ease forwards;
            animation-delay: 0.5s;
        }
        
        .sticky-note:hover {
            transform: rotate(0deg) scale(1.05);
            z-index: 10;
        }
        
        .sticky-note:before {
            content: '';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 30px;
            background-color: rgba(0,0,0,0.1);
            border-radius: 2px;
            z-index: -1;
        }
        
        .polaroid {
            background-color: white;
            padding: 10px 10px 30px 10px;
            width: 200px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transform: rotate(2deg);
            margin-bottom: 40px;
            position: relative;
            transition: transform 0.3s ease;
            opacity: 0;
            animation: fadeIn 0.5s ease forwards;
            animation-delay: 1s;
        }
        
        .polaroid:hover {
            transform: rotate(0deg) scale(1.05);
            z-index: 10;
        }
        
        .polaroid img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }
        
        .polaroid-caption {
            font-family: 'Caveat', cursive;
            font-size: 18px;
            text-align: center;
            margin-top: 10px;
        }
        
        .sticker {
            position: absolute;
            width: 80px;
            height: 80px;
            background-size: contain;
            background-repeat: no-repeat;
            animation: wobble 3s ease infinite;
            cursor: pointer;
            transition: transform 0.2s ease;
            opacity: 0;
            animation: fadeInRotate 0.5s ease forwards;
        }
        
        .sticker:hover {
            transform: scale(1.2);
        }
        
        .sticker-1 {
            top: 250px;
            left: 30px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='%23FF6B6B'/%3E%3Cpath d='M50 20C35 20 25 35 25 50C25 75 50 85 50 85C50 85 75 75 75 50C75 35 65 20 50 20Z' fill='white'/%3E%3C/svg%3E");
            animation-delay: 1.5s;
        }
        
        .sticker-2 {
            top: 350px;
            left: 200px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='%234ECDC4'/%3E%3Cpath d='M30 35C35 30 45 30 50 35C55 30 65 30 70 35C75 40 75 50 70 55C65 60 55 65 50 70C45 65 35 60 30 55C25 50 25 40 30 35Z' fill='white'/%3E%3C/svg%3E");
            animation-delay: 2s;
        }
        
        .coffee-stain {
            position: absolute;
            width: 100px;
            height: 100px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M30,50 C30,30 70,30 70,50 C70,80 55,85 50,85 C45,85 30,80 30,50 Z' fill='%23A57939' fill-opacity='0.3'/%3E%3C/svg%3E");
            bottom: 50px;
            left: 130px;
            transform: rotate(30deg);
            opacity: 0;
            animation: fadeIn 0.5s ease forwards;
            animation-delay: 2.5s;
            pointer-events: none;
        }
        
        .paperclip {
            position: absolute;
            width: 30px;
            height: 60px;
            top: 180px;
            left: -10px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 60'%3E%3Cpath d='M5,5 C2,8 2,12 5,15 L20,30 C25,35 35,25 30,20 L15,5 C10,0 0,10 5,15 L20,30 C25,35 35,25 30,20' stroke='%23CCC' stroke-width='3' fill='none'/%3E%3C/svg%3E");
            transform: rotate(-10deg);
            opacity: 0;
            animation: fadeIn 0.5s ease forwards;
            animation-delay: 3s;
            z-index: 5;
        }
        
        .doodle {
            position: absolute;
            width: 120px;
            height: 120px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cpath d='M20,50 C20,20 80,20 80,50 M35,30 C35,70 65,70 65,30 M30,80 L70,80 M50,20 L50,80' stroke='%23888' stroke-width='2' fill='none' stroke-dasharray='5,5'/%3E%3C/svg%3E");
            top: 420px;
            left: 100px;
            opacity: 0;
            animation: fadeIn 0.5s ease forwards, float 5s ease-in-out infinite;
            animation-delay: 3.5s;
        }
        
        .confetti-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            opacity: 0;
        }
        
        /* Right side letter styling */
        .letter-paper {
            background-color: var(--paper-color);
            padding: 60px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-radius: 5px;
            position: relative;
            z-index: 1;
            animation: floatingLetter 5s ease-in-out infinite;
            overflow: hidden;
            flex: 2;
        }
        
        /* Existing styles... */
        @keyframes floatingLetter {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .fold-mark-horizontal {
            position: absolute;
            width: 100%;
            height: 1px;
            background: rgba(0,0,0,0.05);
            top: 33%;
            left: 0;
            box-shadow: 0 0 5px rgba(0,0,0,0.05);
            z-index: 2;
        }
        
        .fold-mark-vertical {
            position: absolute;
            width: 1px;
            height: 100%;
            background: rgba(0,0,0,0.05);
            top: 0;
            left: 50%;
            box-shadow: 0 0 5px rgba(0,0,0,0.05);
            z-index: 2;
        }

        .letter-header {
            text-align: right;
            margin-bottom: 40px;
        }

        .date {
            font-style: italic;
            color: #777;
        }

        .letter-content {
            font-size: 18px;
            line-height: 1.8;
            white-space: pre-wrap;
            position: relative;
            min-height: 300px;
        }
        
        .highlight {
            background: linear-gradient(transparent 60%, rgba(193, 122, 116, 0.2) 40%);
            padding: 0 2px;
            transition: background 0.5s ease;
        }

        .signature {
            font-family: 'Caveat', cursive;
            font-size: 32px;
            margin-top: 40px;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .cursor {
            display: inline-block;
            width: 2px;
            height: 1.2em;
            background-color: #333;
            animation: blink 0.7s infinite;
            vertical-align: middle;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        .photo-memory {
            display: inline-block;
            width: 100px;
            height: 100px;
            background-color: #f0f0f0;
            margin: 10px;
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            overflow: hidden;
            position: relative;
            transform: rotate(calc(var(--rotation) * 1deg));
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .photo-memory:hover {
            transform: rotate(calc(var(--rotation) * 1deg)) scale(1.1);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            z-index: 10;
        }
        
        .photo-memory img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .photo-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: rgba(0,0,0,0.7);
            color: white;
            padding: 5px;
            font-size: 10px;
            text-align: center;
        }
        
        .photos-container {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            opacity: 0;
            transition: opacity 1s ease;
        }
        
        .controls {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            border-radius: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            z-index: 100;
        }
        
        .control-button {
            padding: 10px 15px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s, transform 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .control-button:hover {
            background-color: #345c8d;
            transform: translateY(-2px);
        }
        
        .control-button:active {
            transform: translateY(0);
        }
        
        .control-button.secondary {
            background-color: #6c757d;
        }
        
        .control-button.secondary:hover {
            background-color: #5a6268;
        }
        
        .speed-controls {
            display: flex;
            gap: 5px;
        }
        
        .speed-button {
            padding: 5px 10px;
            background-color: #6c757d;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s, transform 0.2s;
        }
        
        .speed-button.active {
            background-color: var(--accent-color);
        }
        
        .emotions {
            position: fixed;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 100;
        }
        
        .emotion-button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background-color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            cursor: pointer;
            font-size: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .emotion-button:hover {
            transform: scale(1.2);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        
        .floating-emoji {
            position: fixed;
            font-size: 2rem;
            pointer-events: none;
            animation: floatUp 3s forwards ease-out;
            z-index: 1000;
        }
        
        @keyframes floatUp {
            0% {
                opacity: 1;
                transform: translate(0, 0) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translate(calc(var(--x-float) * 100px), -100px) rotate(calc(var(--rotation) * 1deg));
            }
        }
        
        .social-share {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
            opacity: 0;
            transition: opacity 1s ease;
        }
        
        .share-button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #f0f0f0;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #333;
            text-decoration: none;
            transition: transform 0.3s, background-color 0.3s;
        }
        
        .share-button:hover {
            transform: translateY(-5px);
        }
        
        .share-twitter { background-color: #1DA1F2; color: white; }
        .share-facebook { background-color: #4267B2; color: white; }
        .share-linkedin { background-color: #0077B5; color: white; }
        .share-email { background-color: #D44638; color: white; }
        
        .tissues-button {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: white;
            color: var(--accent-color);
            border: 2px solid var(--accent-color);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            z-index: 100;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .tissues-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        
        .tissue {
            position: fixed;
            width: 60px;
            height: 60px;
            background-color: white;
            border-radius: 10px;
            pointer-events: none;
            z-index: 101;
            opacity: 0.8;
            animation: tissueFall 3s forwards ease-in-out;
        }
        
        @keyframes tissueFall {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }
            50% {
                transform: translate(calc(var(--x-float) * 100px), 100px) rotate(calc(var(--rotation) * 90deg));
            }
            100% {
                transform: translate(calc(var(--x-float) * 200px), 300px) rotate(calc(var(--rotation) * 180deg));
                opacity: 0;
            }
        }
        
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 5px;
            background-color: var(--accent-color);
            width: 0%;
            transition: width 0.3s ease;
            z-index: 1000;
        }
        
        .music-control {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            z-index: 100;
            transition: transform 0.3s;
        }
        
        .music-control:hover {
            transform: scale(1.1);
        }
        
        /* Animation keyframes */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeInRotate {
            0% { opacity: 0; transform: rotate(-20deg) scale(0.5); }
            100% { opacity: 1; transform: rotate(0deg) scale(1); }
        }
        
        @keyframes wobble {
            0%, 100% { transform: rotate(-3deg); }
            50% { transform: rotate(3deg); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        @keyframes sparkle {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.2); opacity: 1; }
        }
        
        /* Accessibility focus styles */
        button:focus, a:focus {
            outline: 3px solid var(--accent-color);
            outline-offset: 2px;
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            .letter-paper {
                padding: 30px;
            }
            
            .controls {
                flex-wrap: wrap;
                justify-content: center;
                width: 90%;
                max-width: 400px;
            }
            
            .emotions {
                bottom: 80px;
                top: auto;
                right: 10px;
                transform: none;
                flex-direction: row;
            }
            
            .tissues-button {
                bottom: 80px;
                left: 10px;
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
            
            .photo-memory {
                width: 80px;
                height: 80px;
            }
            
            .container.visible {
                flex-direction: column;
                align-items: center;
            }
            
            .left-side {
                max-width: 100%;
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 20px;
                margin-bottom: 30px;
            }
            
            .sticky-note, .polaroid {
                margin-bottom: 0;
            }
            
            .sticker, .coffee-stain, .paperclip, .doodle {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="progress-bar" id="progress-bar"></div>
    
    <div class="envelope-container" id="envelope-container">
        <div class="envelope" id="envelope">
            <div class="envelope-flap" id="envelope-flap"></div>
            <div class="envelope-body"></div>
            <div class="wax-seal" id="wax-seal">YN</div>
        </div>
    </div>
    
    <div class="container" id="letter-container">
        <div class="paper-texture"></div>
        
        <!-- New Left Side Gimmicks -->
        <div class="left-side" id="left-side">
            <div class="sticky-note">
                <p>To my awesome friends of the GC - you made every day special! Keep being amazing!</p>
            </div>
            
            <div class="polaroid">
                <img src="/api/placeholder/180/150" alt="GC squad memories">
                <div class="polaroid-caption">Good times with great people</div>
            </div>
            
            <div class="sticker sticker-1" id="sticker1"></div>
            <div class="sticker sticker-2" id="sticker2"></div>
            <div class="coffee-stain"></div>
            <div class="paperclip"></div>
            <div class="doodle"></div>
            
            <div class="confetti-container" id="confetti-container"></div>
        </div>
        
        <!-- Original Letter Content -->
        <div class="letter-paper">
            <div class="fold-mark-horizontal"></div>
            <div class="fold-mark-vertical"></div>
            <div class="letter-header">
                <p class="date">March 12, 2025</p>
            </div>
            <div class="letter-content" id="letter">
                <span id="typed-text"></span><span class="cursor" id="cursor"></span>
            </div>
            <div class="photos-container" id="photos-container">
                <div class="photo-memory" style="--rotation: -5">
                    <img src="./kabuang.png" alt="Kabaliwan sa Gc">
                    <div class="photo-caption">Mga kabaliwan sa GC</div>
                </div>
                <div class="photo-memory" style="--rotation: 3">
                    <img src="./GA.png" alt="GA">
                    <div class="photo-caption">The usual GiveAways</div>
                </div>
                <div class="photo-memory" style="--rotation: -2">
                    <img src="./philosophy.png" alt="The Usual Philosophy">
                    <div class="photo-caption">Asking about questions in Life</div>
                </div>
                <div class="photo-memory" style="--rotation: 6">
                    <img src="./image.png" alt="The usual Suyo">
                    <div class="photo-caption">Sinusuyo ba naman ni msg si sere?</div>
                </div>
            </div>
            <div class="signature" id="signature">
                With heartfelt gratitude,
                <br />
                Kay Writes
            </div>
            <div class="social-share" id="social-share">
                <a href="#" class="share-button share-twitter"><i class="fab fa-twitter"></i></a>
                <a href="#" class="share-button share-facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="share-button share-linkedin"><i class="fab fa-linkedin-in"></i></a>
                <a href="#" class="share-button share-email"><i class="fas fa-envelope"></i></a>
            </div>
        </div>
    </div>
    
    <div class="controls" id="controls">
        <button class="control-button" id="replay-btn"><i class="fas fa-redo"></i> Replay</button>
        <button class="control-button" id="pause-btn"><i class="fas fa-pause"></i> Pause</button>
        <div class="speed-controls">
            <button class="speed-button" data-speed="0.5">0.5x</button>
            <button class="speed-button active" data-speed="1">1x</button>
            <button class="speed-button" data-speed="2">2x</button>
        </div>
    </div>
    
    <div class="emotions" id="emotions">
        <button class="emotion-button" data-emoji="❤️"><i class="fas fa-heart"></i></button>
        <button class="emotion-button" data-emoji="😂"><i class="fas fa-laugh"></i></button>
        <button class="emotion-button" data-emoji="😢"><i class="fas fa-sad-tear"></i></button>
        <button class="emotion-button" data-emoji="👍"><i class="fas fa-thumbs-up"></i></button>
    </div>
    
    <button class="tissues-button" id="tissues-btn"><i class="fas fa-box-tissue"></i></button>
    <button class="music-control" id="music-control"><i class="fas fa-music"></i></button>
    
    <script>
        // Letter text content
        const letterText = `Dear GC friends,

I wanted to take a moment to express my <span class="highlight">deepest gratitude</span> for all of you. Looking back at our time together, I am filled with nothing but joy and appreciation.

From the late-night conversations that stretched until dawn, to the inside jokes that never fail to make me smile, you've all created a special place in my heart. The daily interactions, the shared memes, the deep philosophical discussions—they've all meant more to me than I can adequately express.

Through ups and downs, celebrations and hardships, this group has been a <span class="highlight">constant source of support</span>. I've learned from each of you, grown because of you, and found friendship in the most unexpected but wonderful ways.

The giveaways, the random philosophical questions about life, the playful banter—all of these moments have woven together to create a tapestry of memories I'll cherish forever.

Thank you for the laughter, the kindness, and for being exactly who you are. This group chat has been more than just messages on a screen; it's been a <span class="highlight">home</span> for all of us.

I'm looking forward to many more years of your special brand of madness. I will continue to pray for all of you, I WAS HAPPY THAT I MET Y'ALL! Specially to the woman i love, Ruby.`;

        // DOM Elements
        const envelope = document.getElementById('envelope');
        const waxSeal = document.getElementById('wax-seal');
        const letterContainer = document.getElementById('letter-container');
        const typedTextElement = document.getElementById('typed-text');
        const cursorElement = document.getElementById('cursor');
        const signatureElement = document.getElementById('signature');
        const photosContainer = document.getElementById('photos-container');
        const socialShareContainer = document.getElementById('social-share');
        const progressBar = document.getElementById('progress-bar');
        const replayBtn = document.getElementById('replay-btn');
        const pauseBtn = document.getElementById('pause-btn');
        const speedButtons = document.querySelectorAll('.speed-button');
        const emotionButtons = document.querySelectorAll('.emotion-button');
        const tissuesBtn = document.getElementById('tissues-btn');
        const musicControl = document.getElementById('music-control');
        const confettiContainer = document.getElementById('confetti-container');
        
        // Variables
        let isPlaying = false;
        let isPaused = false;
        let typingSpeed = 50; // ms per character
        let currentCharIndex = 0;
        let typingInterval;
        let audioElement;
        
        // Initialize the page
        window.addEventListener('DOMContentLoaded', () => {
            // Setup audio
            audioElement = new Audio('./Lost in Time.mp3');
            audioElement.loop = true;
            
            // Add event listeners
            waxSeal.addEventListener('click', openEnvelope);
            replayBtn.addEventListener('click', replay);
            pauseBtn.addEventListener('click', togglePause);
            speedButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    setSpeed(parseFloat(btn.dataset.speed));
                    speedButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                });
            });
            
            emotionButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    createFloatingEmoji(btn.dataset.emoji);
                });
            });
            
            tissuesBtn.addEventListener('click', createTissue);
            musicControl.addEventListener('click', toggleMusic);
            
            // Create stickers animation
            document.getElementById('sticker1').addEventListener('click', () => {
                createConfetti(20);
            });
            
            document.getElementById('sticker2').addEventListener('click', () => {
                createConfetti(20);
            });
        });
        
        // Open envelope and start animation
        function openEnvelope() {
            envelope.classList.add('opened');
            
            setTimeout(() => {
                letterContainer.style.display = 'flex';
                setTimeout(() => {
                    letterContainer.classList.add('visible');
                    startTyping();
                }, 500);
            }, 1500);
        }
        
        // Start typing animation
        function startTyping() {
            isPlaying = true;
            isPaused = false;
            currentCharIndex = 0;
            typedTextElement.innerHTML = '';
            signatureElement.style.opacity = 0;
            photosContainer.style.opacity = 0;
            socialShareContainer.style.opacity = 0;
            
            typingInterval = setInterval(typeNextChar, typingSpeed);
            updateProgressBar();
        }
        
        // Type next character
        function typeNextChar() {
            if (currentCharIndex < letterText.length) {
                // Check if we're starting a span tag
                if (letterText.substring(currentCharIndex).startsWith('<span')) {
                    // Find the end of the opening tag
                    const tagEndIndex = letterText.indexOf('>', currentCharIndex) + 1;
                    const tag = letterText.substring(currentCharIndex, tagEndIndex);
                    typedTextElement.innerHTML += tag;
                    currentCharIndex = tagEndIndex;
                }
                // Check if we're ending a span tag
                else if (letterText.substring(currentCharIndex).startsWith('</span')) {
                    // Add the closing tag
                    typedTextElement.innerHTML += '</span>';
                    currentCharIndex += 7; // Length of </span>
                }
                else {
                    // Regular character
                    typedTextElement.innerHTML += letterText.charAt(currentCharIndex);
                    currentCharIndex++;
                }
                
                updateProgressBar();
            } else {
                // Typing finished
                clearInterval(typingInterval);
                finishTyping();
            }
        }
        
        // Finish typing animation
        function finishTyping() {
            cursorElement.style.display = 'none';
            signatureElement.style.opacity = 1;
            
            setTimeout(() => {
                photosContainer.style.opacity = 1;
                
                setTimeout(() => {
                    socialShareContainer.style.opacity = 1;
                    createConfetti(50);
                }, 1000);
            }, 1000);
        }
        
        // Update progress bar
        function updateProgressBar() {
            const progress = (currentCharIndex / letterText.length) * 100;
            progressBar.style.width = `${progress}%`;
        }
        
        // Toggle pause/resume
        function togglePause() {
            if (!isPlaying) return;
            
            if (isPaused) {
                // Resume
                typingInterval = setInterval(typeNextChar, typingSpeed);
                pauseBtn.innerHTML = '<i class="fas fa-pause"></i> Pause';
            } else {
                // Pause
                clearInterval(typingInterval);
                pauseBtn.innerHTML = '<i class="fas fa-play"></i> Resume';
            }
            
            isPaused = !isPaused;
        }
        
        // Replay animation
        function replay() {
            clearInterval(typingInterval);
            startTyping();
        }
        
        // Set typing speed
        function setSpeed(multiplier) {
            typingSpeed = 50 / multiplier;
            
            if (isPlaying && !isPaused) {
                clearInterval(typingInterval);
                typingInterval = setInterval(typeNextChar, typingSpeed);
            }
        }
        
        // Create floating emoji
        function createFloatingEmoji(emoji) {
            const floatingEmoji = document.createElement('div');
            floatingEmoji.className = 'floating-emoji';
            floatingEmoji.textContent = emoji;
            
            // Random position near the button
            const x = event.clientX;
            const y = event.clientY;
            
            floatingEmoji.style.left = `${x}px`;
            floatingEmoji.style.top = `${y}px`;
            floatingEmoji.style.setProperty('--x-float', Math.random() * 2 - 1);
            floatingEmoji.style.setProperty('--rotation', Math.random() * 60 - 30);
            
            document.body.appendChild(floatingEmoji);
            
            // Remove after animation completes
            setTimeout(() => {
                document.body.removeChild(floatingEmoji);
            }, 3000);
        }
        
        // Create tissue animation
        function createTissue() {
            const tissue = document.createElement('div');
            tissue.className = 'tissue';
            
            // Position near the tissue button
            tissue.style.left = '50px';
            tissue.style.top = '50px';
            tissue.style.setProperty('--x-float', Math.random() * 2 - 1);
            tissue.style.setProperty('--rotation', Math.random() * 2 - 1);
            
            document.body.appendChild(tissue);
            
            // Remove after animation completes
            setTimeout(() => {
                document.body.removeChild(tissue);
            }, 3000);
        }
        
        // Create confetti animation
        function createConfetti(amount) {
            for (let i = 0; i < amount; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    
                    // Random position, color, and size
                    const size = Math.random() * 10 + 5;
                    const x = Math.random() * window.innerWidth;
                    const y = -20;
                    const colors = ['#ff6b6b', '#4ecdc4', '#ffe66d', '#1a535c', '#ff9f1c'];
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    
                    confetti.style.width = `${size}px`;
                    confetti.style.height = `${size}px`;
                    confetti.style.left = `${x}px`;
                    confetti.style.top = `${y}px`;
                    confetti.style.backgroundColor = color;
                    confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                    confetti.style.opacity = '1';
                    
                    confettiContainer.appendChild(confetti);
                    
                    // Animate falling
                    let pos = -20;
                    let rotation = 0;
                    const fallSpeed = Math.random() * 3 + 1;
                    const rotationSpeed = Math.random() * 5 - 2.5;
                    const horizontalMovement = Math.random() * 2 - 1;
                    
                    const fallInterval = setInterval(() => {
                        pos += fallSpeed;
                        rotation += rotationSpeed;
                        confetti.style.top = `${pos}px`;
                        confetti.style.left = `${parseInt(confetti.style.left) + horizontalMovement}px`;
                        confetti.style.transform = `rotate(${rotation}deg)`;
                        
                        if (pos > window.innerHeight) {
                            clearInterval(fallInterval);
                            confettiContainer.removeChild(confetti);
                        }
                    }, 16);
                }, i * 50);
            }
        }
        
        // Toggle background music
        function toggleMusic() {
            if (audioElement.paused) {
                audioElement.play();
                musicControl.innerHTML = '<i class="fas fa-volume-up"></i>';
            } else {
                audioElement.pause();
                musicControl.innerHTML = '<i class="fas fa-volume-mute"></i>';
            }
        }
    </script>
</body>
</html>
